# Production configuration for Railway deployment

# PostgreSQL configuration
# Railway provides DATABASE_URL, but we need to convert it for Spring Boot
spring.datasource.url=${JDBC_DATABASE_URL:${DATABASE_URL:jdbc:postgresql://localhost:5432/experiments}}
spring.datasource.username=${PGUSER:postgres}
spring.datasource.password=${PGPASSWORD:postgres}
spring.datasource.driver-class-name=org.postgresql.Driver

# JMix datasource mapping
main.datasource.url=${spring.datasource.url}
main.datasource.username=${spring.datasource.username}
main.datasource.password=${spring.datasource.password}

main.liquibase.change-log=com/company/experiments/liquibase/changelog.xml

jmix.ui.login-view-id=LoginView
jmix.ui.main-view-id=MainView
jmix.ui.menu-config=com/company/experiments/menu.xml
jmix.ui.composite-menu=true

ui.login.defaultUsername=admin
ui.login.defaultPassword=admin

jmix.core.available-locales=en

# Disable browser launch in production
vaadin.launch-browser=false

# Vaadin configuration for Railway (dev mode for compatibility)
vaadin.productionMode=false
vaadin.closeIdleSessions=true
vaadin.heartbeatInterval=300
spring.devtools.restart.enabled=false

# Production logging
logging.level.org.atmosphere=warn
logging.level.eclipselink.logging.sql=warn
logging.level.io.jmix.core.datastore=warn
logging.level.io.jmix.core.AccessLogger=info
logging.level.io.jmix=info
logging.level.org.springframework.security=info

# Server configuration
server.port=${PORT:8080}

# JPA/Hibernate configuration for PostgreSQL
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=none
